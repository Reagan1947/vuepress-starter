# 数组元素访问

## 1.1 概述

数组便力量访问方式

格式：数组名

数组内部保存的数据访问方式

格式：数组名[索引]

<br>

索引是数组中数据的编号方式

- 作用：索引用于访问数组中的数据使用，`数组名[索引]` 等同于变量名，是一种特殊的变量名

- 特征 1. 索引从 0 开始

- 特征 2. 索引是连续的

- 特征 3. 索引逐一增加，每次加 1

## 1.2 示例代码

```java
public class main
{
    public static void main(String[] args) {
        int[] arr = new int[3];
        /*
            左边：
            int：说明数组中的元素类型是int类型
            []: 说明这是一个数组
            arr：这是数组的名称

            右边：
            new：为数组申请内存空间
            int：说明数组中的元素是int类型
            []：说明这是一个数组
            3：数组长度，其实就是数组中元素的个数
         */
        System.out.println(arr);  // [I@1b6d3586
        
        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr[2]);
    }
}
```

## 1.3 内存分配

Java 中内存分配：

Java 程序在运行时，需要在内存中分配空间。为了提高运算效率，就对空间进行了不同区域的划分，因为每一片区域都有特定的处理数据方式和内存管理方式。

```java
int[] arr = new int[3];
// 输出数组名及元素
System.out.println(arr[0]);
System.out.println(arr[1]);
System.out.println(arr[2]);
```

数组在初始化时，会为存储空间添加默认值

- 整数：默认 0
- 浮点数：默认 0.0
- 布尔值：默认值 false
- 字符：默认值是空字符
- 引用数据类型：默认值是 null

<img src="https://research-campus-1256316910.cos.ap-chongqing.myqcloud.com/PicGo未命名文件 (1).svg" alt="未命名文件 (1)"  />

- 栈内存：存储的是局部变量

  定义在方法中的变量，例如：`arr`

  使用完毕，立即消失

- 堆内存：存储 new 出来的内容(实体，对象)

  数组在初始化时，会为存储空间添加默认值

  - 整数：默认 0
  - 浮点数：默认 0.0
  - 布尔值：默认值 false
  - 字符：默认值是空字符
  - 引用数据类型：默认值是 null

- 每一个 new 出来的东西都有一个地址值，使用完毕，会在垃圾回收器空闲时被回收

## 1.4 数组内存图 

### 1.4.1 数组内存图(单个数组)

```java
public class main
{
    public static void main(String[] args) {
        int[] arr = new int[3];
        // 输出数组名及元素
        System.out.println(arr);

        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr[2]);
        // 给数组中的元素赋值
        arr[0] = 100;
        arr[2] = 200;
        // 再次输出数组名及元素
        System.out.println(arr);
        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr[2]);
    }
}
```

```java
[I@1b6d3586
0
0
0
[I@1b6d3586
100
0
200
```

### 1.4.2 数组内存图(多个数组)

```java
public class main
{
    public static void main(String[] args) {
        int[] arr = new int[3];
        int[] arr2 = new int[3];
        // 输出数组名及元素
        System.out.println(arr);
        System.out.println(arr[0]);
        System.out.println(arr[1]);

        System.out.println(arr2);
        System.out.println(arr2[0]);
        System.out.println(arr2[2]);

        System.out.println("-------");

        // 给数组中的元素赋值
        arr[0] = 100;

        arr2[0] = 200;
        arr2[2] = 300;
        // 再次输出数组名及元素
        System.out.println(arr);
        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr2);
        System.out.println(arr2[0]);
        System.out.println(arr2[2]);
    }
}

```

```java
[I@1b6d3586
0
0
[I@4554617c
0
0
-------
[I@1b6d3586
100
0
[I@4554617c
200
300
```

![数组元素访问_3](https://research-campus-1256316910.cos.ap-chongqing.myqcloud.com/PicGo数组元素访问_3.svg)



### 1.4.3 数组内存图(多个数组指向相同)

```java
public class main
{
    public static void main(String[] args) {
        int[] arr = new int[3];

        arr[1] = 200;
        arr[2] = 300;

        System.out.println(arr);
        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr[2]);

        // 定义第二个数组指向第一个数组
        int[] arr2 = arr;
        arr2[0] = 111;
        arr2[1] = 222;
        arr2[2] = 333;

        // 输出两个数组的名及元素
        System.out.println(arr);
        System.out.println(arr[0]);
        System.out.println(arr2);
        System.out.println(arr2[0]);
    }
}
```

```java
[I@1b6d3586
0
200
300
[I@1b6d3586
111
[I@1b6d3586
111
```

![数组元素访问_1](https://research-campus-1256316910.cos.ap-chongqing.myqcloud.com/PicGo数组元素访问_1.svg)

## 1.5 数组初始化之静态初始化

静态初始化：初始化时指定每个元素的初始值，由系统决定数组长度

- 格式：数据类型[ ]  变量名 = new 数据类型[ ] {数据1, 数据2, 数据3, ……};

  范例：`int [] arr = new int[ ] {1, 2, 3, ...};`

- 简化格式：数据类型[ ]  变量名 = {数据1, 数据2, 数据3, ……};

  范例：`int[] arr = {1, 2, 3, ...};`

```java
public class main
{
    public static void main(String[] args) {
        // 定义数组
        int[] arr = {1, 2, 3};

        // 输出数组名
        System.out.println(arr);

        // 输出数组中的元素
        System.out.println(arr[0]);
        System.out.println(arr[1]);
        System.out.println(arr[2]);
    }
}
```

```java
[I@1b6d3586
1
2
3
```

## 1.6 数组操作的两个常见小问题

1. 索引越界：

```java
int[] arr = new int[3];
// 输出元素
System.out.println(arr[3]);
```

![数组元素访问_2](https://research-campus-1256316910.cos.ap-chongqing.myqcloud.com/PicGo数组元素访问_2.svg)



`new int[3]` 初始化了一个索引从 0~2 的数组，当访问 `arr[3]`  时就会造成索引越界问题。即：访问了数组中不存在的索引对应的元素，造成索引越界问题。

2. 空指针异常：

```java
public class main
{
    public static void main(String[] args) {
        int[] arr = new int[3];

        System.out.println(arr[2]);
        // 把null的值赋值给数组
        arr = null;
        // 输出元素
        System.out.println(arr[0]);
    }
}
```

```java
0
// Exception in thread "main" java.lang.NullPointerException
	//at main.main(main.java:10)
```

![数组元素访问_4](https://research-campus-1256316910.cos.ap-chongqing.myqcloud.com/PicGo数组元素访问_4.svg)

空指针异常：访问的数组已经不再指向堆内存的数据，造成空指针异常。

